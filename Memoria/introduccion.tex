Un pedal de efectos es un dispositivo que se conecta entre un instrumento (normalmente electrófono) y su amplificador encargándose de modificar la señal de entrada y sus características fundamentales como pueden ser timbre, tono y volumen. En este proyecto se pretende estudiar las posibilidades de diseño e implementación de uno de estos pedales, enfocándolo a un uso con instrumentos de viento, en concreto el saxofón puesto que es el instrumento que yo toco. Generalmente, no es habitual el uso de pedales de efectos en instrumentos de viento, ya que en general se busca mantener el sonido lo más fiel posible al producido por el instrumento. No obstante, en multitud de producciones se pueden apreciar efectos añadidos en postproducción ya sea digital o analógicamente. Algunos ejemplos son el \emph{reverb} o el \emph{chorus}. Sin embargo, aqui se pretende implementar un efecto de octavador, el cual se describirá posteriormente.

Se ha decidido el combinar este efecto con la implementación en formato de pedal. Este formato se ha hecho muy popular desde su aparición, debido a que los intérpretes pueden activarlo con el pie pudiendo mantaner las manos en el instrumento. Aunque los intérpretes de instrumentos de viento no están acostumbrados al uso de pedales, se mantiene la idea del pedal por analogía con otros instrumentos.

Este proyecto abarca todo el proceso desde la idea inicial, diseño y montaje del prototipo final, por tanto, las especificaciones de funcionamiento que se han utilizado pretenden facilitar un uso profesional del prototipo, de forma que sea compatible con los estándares establecidos en el contexto musical e ingenieril al mismo tiempo.

El flujo de datos será el siguiente. En primer lugar se utiliza un transductor para adquirir la señal, en este caso, un micrófono convencional. Una vez que el estímulo externo es transformado en pulsos eléctricos, atravesará un etapa de entrada analógica que pre-amplifica la señal y la adecúa a la entrada de la FPGA.

Para el prototipo se ha utilizado la placa proporcionada por el departamento: Nexys A7. Esta placa monta una FPGA \emph{Xilinx XC7A100T-1CSG324C} junto con varios switches, botones, leds y displays de 7 segmentos, que harán más fácil el manejo de la misma. Esta placa tiene un micrófono integrado, pero es de tan baja calidad que se opta por diseñar la etapa de entrada, analógica completamente, y conectarla con uno de los puertos del \emph{Pmod i2s2}, también de Digilent y proporcionado por el departamento. Este módulo contiene ADC, DAC y los conectores de mini-jack estándar en formato de audio, que servirán para gestionar la señal de entrada y la de salida.

Se implementará un algoritmo que se encargará de llevar a cabo la octavación de la señal de entrada y de proporcionarla en la salida. Este algoritmo utiliza una aproximación de \emph{Phase Vocoder} muy común en el tratamiento de señales de audio realizando una transformación al dominio de la frecuencia mediante FFT. Durante todo el proceso se priorizará el criterio de la baja latencia, dado que si no, resulta imposible operar en tiempo real. El algoritmo se describirá en profundidad en su capítulo correspondiente.

\section{Objetivos}
Para la realización de este proyecto de forma satisfactoria se ha establecido la consecución de una serie de objetivos que son los siguientes:
\begin{itemize}
\item Diseño de un sistema completo, a partir de una problemática definida previamente mediante el estudio del instrumento y las señales.
\item Implementación sobre la FPGA proporcionada.
\item Construcción de un prototipo para estudiar la problemática desde la práctica.
\item Afianzar, debido a todo esto, conocimientos adquiridos durante el Grado en diversos ámbitos como el procesamiento de señal y en concreto en la especialidad de Sistemas Electrónicos como la programación hardware, el montaje de un circuito analógico y la correcta comunicación entre todos los módulos.
\end{itemize}

\section{Metodología}
\begin{itemize}
\item En primer lugar se seleccionará el efecto que se quieren implementar, dando prioridad al octavador.
\item Como segundo paso, se estudiará la literatura existente y se probarán distintas soluciones algorítmicas empleando MATLAB.
\item Estudio y elección de la interfaces de entrada y salida. Selección de micrófono, ADC y DAC.
\item Desarrollo y verificación en VHDL empleando la herramienta VIVADO de Xillinx.
\item Montaje de un prototipo empleando la placa Nexys A7 de Digilent, el micrófono seleccionado anteriormente y el resto de dispositivos que fueran necesarios.
\item Test y depuración.
\end{itemize}

\section{Resultados}
Para llegar a los resultados descritos se ha dedicado el tiempo ilustrado aqui.

\begin{table}[htb]
\centering
\begin{tabular}{l r}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\multirow{2}{9cm}{\centering{\textbf{Algoritmo}}}                   &\multirow{2}{2cm}{\textbf{10h}}   \\
				                                                    &                                  \\
\hline
Investigación de los diferentes algoritmos                          &3h                                \\ 
Comparativa y evaluación de los mismos                              &Sevilla                           \\
Prueba del algoritmo escogido en Matlab                             &Sevilla                           \\
\hline 
\hline
\multirow{2}{9cm}{\centering{\textbf{Circuito analógico}}}          &\multirow{2}{2cm}{\textbf{10h}}   \\
				                                                    &                                  \\
\hline 
Fase de documentación y montaje del circuito elegido                &3h                                \\ 
Pruebas y medidas                                                   &Sevilla                           \\
\hline 
\hline
\multirow{2}{9cm}{\centering{\textbf{Implementación}}}              &\multirow{2}{2cm}{\textbf{10h}}   \\
				                                                    &                                  \\
\hline
Caracterización y puesta en marcha de la entrada y salida de datos  &3h                                \\ 
Implementación del algoritmo de Matlab en VHDL usando Vivado        &Sevilla                           \\
Depuración y pruebas                                                &Sevilla                           \\
\hline 
\hline 
\multirow{2}{9cm}{\centering{\textbf{Otros}}}                       &\multirow{2}{2cm}{\textbf{10h}}   \\
				                                                    &                                  \\
\hline
Medidas y estimaciones sobre el prototipo final                     &3h                                \\ 
Realización de la memoria                                           &Sevilla                           \\
\hline 
\hline
\multirow{2}{9cm}{\centering{\textbf{TOTAL}}}                       &\multirow{2}{2cm}{\textbf{10h}}   \\
				                                                    &                                  \\
\end{tabular}
%\caption{\label{tabla:tiempo}Relación de tiempo de trabajo destinado a cada ámbito.}
\end{table}

\section{Consecución de objetivos}
